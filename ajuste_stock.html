<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>ExpresaStyle</title>
  <link href="./src/img/expressa_style.jpg" rel="shortcut icon" type="image/x-icon" />
  <link rel="stylesheet" href="./css/alertify.min.css">
  <link rel="stylesheet" href="./css/bootstrap.min.css">
  <link rel="stylesheet" href="./css/bootstrap-icons.css">
  <link rel="stylesheet" href="./css/datatables.min.css">
  <link rel="stylesheet" href="./css/style.css">
</head>

<body>

  <div id="modal-info-user"> </div>

  
  <nav class="navbar navbar-expand-lg bg-light bg-azulmarino">
    <div class="container-fluid">
      <a class="navbar-brand" href="./index.html">
        <img src="./src/img/expressa_style.jpg" alt="" width="200" height="60">
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">

      </div>
    </div>
  </nav>



  <!-- Modal -->
  <div class="modal fade" id="consultarArticulo" data-bs-backdrop="static" tabindex="-1" role="dialog"
    aria-labelledby="consultarArticuloLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered  modal-xl">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="titulo text-center" id="titulo-modal">Artículos</h2>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="table-responsive py-4">
            <table id="consultTableArticulo" class="table table-striped table-bordered display" style="width: 100%;">
              <thead class="table-dark">
                <tr class="tabla-cabecera">
                  <th>COD. BARRA</th>
                  <th>DESCRIPCIÓN</th>
                  <th>STOCK</th>
                  <th>PRECIO</th>
                  <th>OPC.</th>
                </tr>
              </thead>

              <tbody id="tbody_articulo">

              </tbody>

            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

    <div class="container mt-5">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <div class="card">
                    <div class="card-header">
                        <h1 class="titulo text-center" id="titulo">Nuevo Ajuste de Artículo</h1>
                    </div>
                    <form id="form">
                        <div class="card-body">

                            <div class="row">
                                <label class="font-weight-bold" for="descripcion">Artículo</label>
                                <div class="mt-2 col-md-2">
                                    <button type="button" class="btn btn-primary" id="search"> Buscador </button>
                                </div>
                                <div class="mt-2 col-md-10">
                                    <input type="hidden" id="id_art">
                                    <input class="form-control" name="nombre" id="nombre" type="text"
                                        placeholder="Nombre del artículo" minlength="3" maxlength="200"
                                        readonly required>
                                </div>
                            </div>

                            <div class="mt-2">
                                <label class="font-weight-bold" for="existencia">Stock actual</label>
                                <input type="text" name="existencia" id="existencia" class="form-control text-sm-end"
                                    placeholder="Existencia *" required readonly>
                            </div>

                            <div class="mt-2">
                                <label class="font-weight-bold" for="descripcion">Cantidad a ajustar</label>
                                <input type="text" name="cantidad" id="cantidad" class="form-control text-end" placeholder="Cantidad *" minlength="1" maxlength="11" onKeyPress="return soloDecimal(event)" required>
                            </div>

                            <div class="mt-2">
                                <label class="font-weight-bold" for="descripcion">Motivo de ajuste</label>
                                <textarea class="form-control" name="descripcion" name="descripcion" id="descripcion" rows="3"></textarea>
                            </div>

                            <div class="form-check mt-2">
                              <input class="form-check-input" type="radio" name="tipo" id="entrada" value="E">
                              <label class="form-check-label" for="entrada">
                                Entrada de artículo
                              </label>
                            </div>
                            <div class="form-check">
                              <input class="form-check-input" type="radio" name="tipo" id="salida" value="S" checked>
                              <label class="form-check-label" for="salida">
                                Salida de artículo
                              </label>
                            </div>

                        </div>
                        <div class="card-footer">
                            <div class="row">
                                <div class="col-md-6 d-grid gap-2">
                                    <button type="button" class="btn btn-danger" id="btn-cancel"><i class="bi bi-x-circle"></i> Cancelar</button>
                                </div>
                                <div class="col-md-6 d-grid gap-2">
                                    <button type="submit" class="btn btn-primary" id="btn_guardar"><i class="bi bi-save"></i> Guardar</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="row my-5">
            <div class="col-lg-12">
                <div class="card">
                    <div class="card-header">
                        <div class="row">
                            <h2 class="titulo text-center">Ajustes de Stock </h2>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive py-4">
                            <table id="example" class="table table-striped table-bordered display">
                                <thead class="table-dark">
                                    <tr class="tabla-cabecera">
                                        <th style="width: 5%;" class="text-sm-end">Código</th>
                                        <th style="width: 30%;">Nombre</th>
                                        <th style="width: 10%;" class="text-sm-end">Antes</th>
                                        <th style="width: 10%;" class="text-sm-end">Ajustado</th>
                                        <th style="width: 10%;" class="text-sm-end">Después</th>
                                        <th style="width: 20%;">Fecha</th>
                                        <th style="width: 10%;">Tipo</th>
                                        <th style="width: 10%;"></th>
                                    </tr>
                                </thead>

                                <tbody id="tbody_registro"> 
                                  
                                </tbody>

                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



  <script type="text/javascript" src="./js/sweetalert2.all.min.js"> </script>
  <script type="text/javascript" src="./js/alertify.min.js"> </script>
  <script type="text/javascript" src="./js/jquery-3.5.1.js"> </script>
  <script type="text/javascript" src="./js/jquery-3.6.0.min.js"> </script>
  <script type="text/javascript" src="./js/popper.min.js"> </script>
  <script type="text/javascript" src="./js/datatables.min.js"></script>
  <script type="text/javascript" src="./js/bootstrap.min.js"></script>


  <script type="text/javascript" src="./js/jquery.dataTables.min.js"></script>
  <script src="./js/funciones.js"></script>
  <script src="./js/registros.js"></script>
  <script src="./js/ajuste_stock.js"></script>



  <script type="text/javascript">

      if(getCookie('usuario') != ''){
        console.log(getCookie('idrol'));
        if(getCookie('idrol') == '1'){
          $('#navbarSupportedContent').html(menuAdmin);
        }else if(getCookie('idrol') == '2'){
          $('#navbarSupportedContent').html(menuCaja);
        }
        $('#logout').html(`<i class="bi bi-box-arrow-right icon-lg"></i> ${getCookie('usuario')}`);
        $('#modal-info-user').html(modalInfoUser);
      }else{
        window.location.href = "./login.html";
      }

                  
      $('#logout').click(function (e) {
          $('#modalInfoUser').modal('show');    
      });



    $('.cerrarSesion').click(function (e) {
      e.preventDefault();
      Swal.fire({
        title: 'Esta seguro de cerrar Sesión?',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Si'
      }).then((result) => {
        if (result.isConfirmed) {
          eliminarCookies();
          window.location.href = "./login.html";
        }
      })
    });
  </script>


</body>

</html>